<html lang="en" xmlns="http://www.w3.org/1999/xhtml" style="display:flex;height:100%;flex-direction:column;">
<head>
    <meta charset="utf-8" />
    <title>Nukcanon ESP32 자율주행 RC카 수업</title>
    <base href='./' />
    <link rel="stylesheet" href="https://nukcanon.github.io/nukcanon/css/style.css" />
    <style>
        /* 추가적인 리스트 스타일 */
        .step-list li {
            margin-bottom: 20px;
            font-size: 1.1em;
            font-weight: bold;
        }
        .step-desc {
            display: block;
            font-size: 0.9em;
            color: #666;
            font-weight: normal;
            margin-top: 4px;
            margin-left: 10px;
        }
    </style>
</head>
<body style="padding-bottom:3px; align-items:center;">
    <div class="topbanner">
        <div style="align-self:stretch; width:960px; display:flex; flex-direction: row;">
            <div style="flex:99999">
                <label>Nukcanon</label>
            </div>
            <div>
                <a target="_self" href="https://nukcanon.github.io/nukcanon/index.html">Home</a>
            </div>
        </div>
    </div>

    <div style="margin: auto; padding: 0px 6px 0px; max-width: 960px; width: 100%;">
        <div class='navfoldercontainer'>
            <div class='navfolder'>
                <h2>ESP32 AI 자율주행 RC카</h2>
            </div>
            
            <div style="line-height:1.6em; padding: 20px;">
                <div style="background-color: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px; margin-bottom: 30px;">
                    <h3 style="margin-top: 0; color: #333; border-bottom: 2px solid #ddd; padding-bottom: 10px;">실습 필요 사항</h3>
                    
                    <ol style="margin-left: -15px; padding-left: 20px;">
                        <li style="margin-bottom: 15px;">
                            <strong>하드웨어 펌웨어 업로드</strong>
                            <div class="step-desc">아래 링크의 가이드를 참고하여 ESP32에는 <b>[시리얼 제어]</b>, ESP32-CAM에는 <b>[텔넷 스트리밍]</b> 코드를 각각 업로드하세요.</div>
                            <div style="text-align: center; margin-top: 10px;">
                                <a href="https://nukcanon.github.io/ESP32-CAM_remote_control/ESP32-CAM_remote_control.html" 
                                   style="display: inline-block; padding: 8px 20px; background-color: #555; color: #fff; text-decoration: none; border-radius: 4px; font-weight: bold; font-size: 0.9em;">
                                   🔗 원격 조종 자동차 가이드 링크
                                </a>
                            </div>
                        </li>
                        <li>
                            <strong>Anaconda 환경 설정</strong>
                            <div class="step-desc">Anaconda Prompt를 실행하고 아래 명령어를 이용하여 가상환경 설정과 필요한 라이브러리를 설치합니다.</div>
                            
                            <div style="background: #333; color: #f1f1f1; padding: 15px; border-radius: 6px; font-family: 'Consolas', monospace; font-size: 0.85em; margin-top: 10px; overflow-x: auto;">
                                <span style="color: #999;"># 1. 가상환경 생성 및 활성화</span><br>
                                conda create -n <span style="color: #ffcc00; font-weight: bold;">drive_env</span> python=3.8.20 -y<br>
                                conda activate <span style="color: #ffcc00; font-weight: bold;">drive_env</span><br><br>
                                
                                <span style="color: #999;"># 2. 주피터 노트북 커널 설치</span><br>
                                pip install ipykernel<br>
                                python -m ipykernel install --user --name=<span style="color: #ffcc00; font-weight: bold;">drive_env</span><br><br>
                                
                                <span style="color: #999;"># 3. 필요 라이브러리 설치 (Tensorflow 버전 필수 준수)</span><br>
                                pip install tensorflow==2.10.0 PyQt5 numpy pandas tqdm Pillow opencv-python matplotlib scikit-learn
                            </div>
                        
                            <p style="font-size: 0.85em; color: #666; margin-top: 8px; line-height: 1.4em;">
                                ※ <b style="color: #333;">drive_env</b>는 가상환경의 이름입니다. 원하시는 다른 이름으로 변경하여 사용할 수 있으며, 이름을 바꿀 경우 위 명령어에 포함된 모든 <b style="color: #333;">drive_env</b>를 동일하게 수정해 주세요.
                            </p>
                        </li>
                    </ol>
                </div>

                <p>위 준비가 끝났다면 아래 순서대로 <code>주피터 노트북</code> 파일을 다운로드하여 실습을 진행합니다.</p>
                <hr>
                
                <ol class="step-list">
                    <li>
                        <a href="https://nukcanon.github.io/machine_learning/ESP32_autonomous_driving/video_keyboard_telnet_driving.ipynb" download>텔넷 키보드 주행 (기본 제어 확인)</a>
                        <span class="step-desc">카메라 영상이 나오는지 확인하고, 키보드로 RC카를 직접 조종하여 회로 연결 상태를 점검합니다.</span>
                    </li>
                    <li>
                        <a href="https://nukcanon.github.io/machine_learning/ESP32_autonomous_driving/video_keyboard_data_collection.ipynb" download>주행 데이터 수집</a>
                        <span class="step-desc">직접 운전하며 학습용 데이터를 수집합니다. 실행 후 'N'키를 눌러 새 폴더를 만든 후 주행하세요.</span>
                    </li>
                    <li>
                        <a href="https://nukcanon.github.io/machine_learning/ESP32_autonomous_driving/teachable_machine_ai.ipynb" download>티처블 머신 모델 테스트 (PC용)</a>
                        <span class="step-desc">구글 Teachable Machine에서 만든 <code>keras_model.h5</code> 파일을 PC에 저장된 이미지로 테스트해봅니다.</span>
                    </li>
                    <li>
                        <a href="https://nukcanon.github.io/machine_learning/ESP32_autonomous_driving/teachable_machine_ai_driving.ipynb" download>티처블 머신 자율주행</a>
                        <span class="step-desc">티처블 머신 모델을 RC카에 적용하여 바로 자율주행을 시도합니다. (데이터 수집 불필요)</span>
                    </li>
                    <li>
                        <a href="https://nukcanon.github.io/machine_learning/ESP32_autonomous_driving/cnn_training.ipynb" download>CNN 모델 학습시키기</a>
                        <span class="step-desc">2번 단계에서 수집한 데이터를 불러와 CNN 모델을 학습시키고 <code>model_CNN.h5</code>를 만듭니다.</span>
                    </li>
                    <li>
                        <a href="https://nukcanon.github.io/machine_learning/ESP32_autonomous_driving/ai_driving.ipynb" download>학습 모델 자율주행</a>
                        <span class="step-desc">학습시킨 모델(model_CNN.h5, model_EN.h5)을 로드하여 RC카가 스스로 운전하게 합니다.(CNN, EfficientNetB0 공용)</span>
                    </li>
                    <li>
                        <a href="https://nukcanon.github.io/machine_learning/ESP32_autonomous_driving/EfficientNetB0_training.ipynb" download>EfficientNetB0 전이 학습</a>
                        <span class="step-desc">EfficientNetB0 모델을 전이학습하여 성능을 높이고, <code>model_EN.h5</code>를 만듭니다. </span>
                    </li>
                    <li>
                        <a href="https://nukcanon.github.io/machine_learning/ESP32_autonomous_driving/ai_driving_thread.ipynb" download>학습 모델 멀티스레드 자율주행</a>
                        <span class="step-desc">학습시킨 모델(model_CNN.h5, model_EN.h5)을 로드하고 영상 수신과 AI 판단을 동시에 처리(멀티스레드)하여 반응 속도를 높인 코드입니다.(CNN, EfficientNetB0 공용)</span>
                    </li>
                </ol>
            </div>
        </div>
    </div>

    <div style="margin: auto; padding: 0px 6px 36px; max-width: 960px; width: 100%;">
        <div class='navfoldercontainer'>
            <div class='navfolder'>
                <h2>하드웨어 연결 가이드</h2>
            </div>

            <div style="text-align: center; margin: 30px 0;">
                <h3>[ 회로도 ]</h3>
                <img style="width: 100%; max-width: 800px; border: 1px solid #ccc; border-radius: 8px;" src="https://nukcanon.github.io/machine_learning/ESP32_autonomous_driving/ESP32_autonomous_driving_회로도.jpg" alt="자율주행 RC카 회로도">
            </div>

            <div style="text-align: center; margin-bottom: 20px;">
                <h3>[ 배선 연결표 ]</h3>
                <div style="display:inline-block; padding: 0px 6px 10px; width: 95%;">
                    <p style="font-weight: bold; margin-top: 15px; text-align: left;">1. ESP32 연결</p>
                    <table class="wiring-table">
                        <thead>
                            <tr>
                                <th width="20%">ESP32 핀</th>
                                <th width="25%">연결 대상</th>
                                <th width="20%">대상의 핀</th>
                                <th>역할 및 설명</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>GPIO 13 / 14</td>
                                <td>ESP32-CAM</td>
                                <td>GPIO 13 / 14</td>
                                <td>시리얼 통신 송수신</td>
                            </tr>
                            <tr>
                                <td>GPIO 16 / 17</td>
                                <td>L298N</td>
                                <td>IN 1 / 2</td>
                                <td>오른쪽 바퀴 전후진</td>
                            </tr>
                            <tr>
                                <td>GPIO 21 / 22</td>
                                <td>L298N</td>
                                <td>IN 3 / 4</td>
                                <td>왼쪽 바퀴 전후진</td>
                            </tr>
                            <tr>
                                <td>+5V / GND</td>
                                <td>공통</td>
                                <td>5V / GND</td>
                                <td>전원 및 기준 전압</td>
                            </tr>
                        </tbody>
                    </table>

                    <p style="font-weight: bold; margin-top: 25px; text-align: left;">2. L298N 및 배터리 연결</p>
                    <table class="wiring-table">
                        <thead>
                            <tr>
                                <th width="25%">L298N 단자</th>
                                <th width="30%">연결 대상</th>
                                <th>설명</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>12V 입력 / GND</td>
                                <td>배터리 (+/-)</td>
                                <td>모터 구동 주 전원</td>
                            </tr>
                            <tr>
                                <td>+5V 출력</td>
                                <td>ESP32 +5V</td>
                                <td>제어 보드 전원 공급</td>
                            </tr>
                            <tr>
                                <td>OUT 1~4</td>
                                <td>모터들</td>
                                <td>바퀴 구동 출력</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div style="text-align: center; margin-top: 10px; margin-bottom: 10px;">
        <style>
            .secret-link, 
            .secret-link:hover, 
            .secret-link:active, 
            .secret-link:visited {
                color: #ffffff !important; 
                text-decoration: none;
                font-size: 1rem;
                cursor: default; 
                user-select: text; 
            }
            .secret-link::selection {
                background: #0078d7;
                color: #ffffff;
            }
        </style>
        <p>
            <a href="https://nukcanon.github.io/machine_learning/ESP32_autonomous_driving/keras_model.h5" class="secret-link" download>keras_model.h5</a>
        </p>
        <p>
            <a href="https://nukcanon.github.io/machine_learning/ESP32_autonomous_driving/model_CNN.zip" class="secret-link" download>model_CNN.zip</a>
        </p>
        <p>
            <a href="https://nukcanon.github.io/machine_learning/ESP32_autonomous_driving/model_EN.zip" class="secret-link" download>model_EN.zip</a>
        </p>
    </div>
</body>
</html>
